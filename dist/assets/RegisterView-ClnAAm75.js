import{a as c,A as N}from"./config-DsceXT9y.js";import{_ as v,o as t,c as a,a as e,w as h,i as E,v as f,n as d,t as p,e as m,j as w,k as u,p as b,b as g}from"./index-C4JoDdy0.js";import{_}from"./logo-BBSAZehn.js";const y={data(){return{popupVisible:!0,showPassword:!1,loading:!1,data:{lastName:"",firstName:"",role:"",email:"",phoneNumber:"",password:""},lastNameError:"",firstNameError:"",roleExistError:"",phoneNumberError:"",emailFormatError:"",emailExistError:"",passwordError:""}},computed:{passwordFieldType(){return this.showPassword?"text":"password"}},methods:{togglePasswordVisibility(){this.showPassword=!this.showPassword},registerStudent(){this.loading=!0,c.post(`${N}/user/register`,this.data).then(i=>{i.status===201&&(this.popupVisible=!1,this.$router.push("/login"))}).catch(i=>{if(console.log(i),i.response)if(i.response.status===403){const r=i.response.data.errors;r&&(r.lastName&&(this.lastNameError=r.lastName),r.firstName&&(this.firstNameError=r.firstName),r.role&&(this.roleExistError=r.role),r.email&&(this.emailFormatError=r.email),r.phoneNumber&&(this.phoneNumberError=r.phoneNumber),r.password&&(this.passwordError=r.password))}else i.response.status===400&&i.response.data.email==="Email already exists"?this.emailExistError="This email is already registered.":i.response.status===400&&i.response.data.role==="Role already exists"?this.roleExistError="This Role already registered.":console.error("Une erreur inattendue s'est produite",i)}).finally(()=>{this.loading=!1})},closePopup(){this.popupVisible=!1,this.resetForm()},resetForm(){this.data={lastName:"",firstName:"",role:"",email:"",phoneNumber:"",password:""},this.clearAllErrors()},clearError(...i){i.forEach(r=>{this[r]=""})},clearAllErrors(){this.lastNameError="",this.firstNameError="",this.roleExistError="",this.phoneNumberError="",this.emailFormatError="",this.emailExistError="",this.passwordError="",this.confirmPasswordError=""},goToLogin(){this.$router.push("/login")}}},n=i=>(b("data-v-8a373e83"),i=i(),g(),i),x={key:0,class:"popup-overlay"},V={class:"popup-content"},k=n(()=>e("div",{class:"nav"},[e("a",{href:"/"},[e("img",{class:"logo",src:_,alt:"Logo"})])],-1)),P={class:"form-field"},F=n(()=>e("div",{class:"top-content"},[e("h2",null,"Enregistrez")],-1)),I={class:"full-name"},S=n(()=>e("label",{class:"last-name",for:"lName"},[u("Nom"),e("span",null,"*")],-1)),T={key:0,class:"error"},U=n(()=>e("label",{class:"first-name",for:"fName"},[u("Prénom"),e("span",null,"*")],-1)),C={key:0,class:"error"},A=n(()=>e("label",{for:"role"},[u("Role"),e("span",null,"*")],-1)),q={key:0,class:"error"},L=n(()=>e("label",{for:"email"},[u("Email"),e("span",null,"*")],-1)),R={key:0,class:"error"},z={key:1,class:"error"},B=n(()=>e("label",{for:"phone"},[u("Téléphone"),e("span",null,"*")],-1)),D={key:0,class:"error"},M=n(()=>e("label",{for:"password"},[u("Mot de passe"),e("span",null,"*")],-1)),j={class:"password-container"},J=["type"],G={key:0,class:"error"},H=["disabled"],K={key:0,class:"fas fa-circle-notch fa-spin"},O={key:1},Q={class:"login"};function W(i,r,X,Y,s,l){return s.popupVisible?(t(),a("div",x,[e("div",V,[k,e("form",{onSubmit:r[14]||(r[14]=h((...o)=>l.registerStudent&&l.registerStudent(...o),["prevent"]))},[e("div",P,[F,e("div",I,[e("div",null,[S,E(e("input",{class:d(["input-field name",{"is-invalid":s.lastNameError}]),type:"text",id:"lName",required:"",placeholder:"Doe","onUpdate:modelValue":r[0]||(r[0]=o=>s.data.lastName=o),onInput:r[1]||(r[1]=o=>l.clearError("lastNameError"))},null,34),[[f,s.data.lastName]]),s.lastNameError?(t(),a("div",T,p(s.lastNameError),1)):m("",!0)]),e("div",null,[U,E(e("input",{class:d(["input-field name",{"is-invalid":s.firstNameError}]),type:"text",id:"fName",required:"",placeholder:"John","onUpdate:modelValue":r[2]||(r[2]=o=>s.data.firstName=o),onInput:r[3]||(r[3]=o=>l.clearError("firstNameError"))},null,34),[[f,s.data.firstName]]),s.firstNameError?(t(),a("div",C,p(s.firstNameError),1)):m("",!0)])]),e("div",null,[A,E(e("input",{type:"text",class:d(["input-field",{"is-invalid":s.roleExistError}]),id:"role",required:"",placeholder:"ex: Sante, Comptable...","onUpdate:modelValue":r[4]||(r[4]=o=>s.data.role=o),onInput:r[5]||(r[5]=o=>l.clearError("roleExistError"))},null,34),[[f,s.data.role]]),s.roleExistError?(t(),a("div",q,p(s.roleExistError),1)):m("",!0)]),e("div",null,[L,E(e("input",{type:"email",class:d(["input-field",{"is-invalid":s.emailFormatError||s.emailExistError}]),id:"email",required:"",placeholder:"example@email.com","onUpdate:modelValue":r[6]||(r[6]=o=>s.data.email=o),onInput:r[7]||(r[7]=o=>l.clearError("emailFormatError","emailExistError"))},null,34),[[f,s.data.email]]),s.emailFormatError?(t(),a("div",R,p(s.emailFormatError),1)):s.emailExistError?(t(),a("div",z,p(s.emailExistError),1)):m("",!0)]),e("div",null,[B,E(e("input",{class:d(["input-field",{"is-invalid":s.phoneNumberError}]),type:"tel",id:"phone",required:"",placeholder:"0123456789","onUpdate:modelValue":r[8]||(r[8]=o=>s.data.phoneNumber=o),onInput:r[9]||(r[9]=o=>l.clearError("phoneNumberError"))},null,34),[[f,s.data.phoneNumber]]),s.phoneNumberError?(t(),a("div",D,p(s.phoneNumberError),1)):m("",!0)]),e("div",null,[M,e("div",j,[E(e("input",{class:d(["input-field",{"is-invalid":s.passwordError}]),type:l.passwordFieldType,id:"password",placeholder:"Enter password","onUpdate:modelValue":r[10]||(r[10]=o=>s.data.password=o),onInput:r[11]||(r[11]=o=>l.clearError("passwordError"))},null,42,J),[[w,s.data.password]]),e("i",{class:d(["toggle-password-icon",{"fas fa-eye-slash":!s.showPassword,"fas fa-eye":s.showPassword}]),onClick:r[12]||(r[12]=(...o)=>l.togglePasswordVisibility&&l.togglePasswordVisibility(...o))},null,2)]),s.passwordError?(t(),a("div",G,p(s.passwordError),1)):m("",!0)]),e("button",{type:"submit",disabled:s.loading},[s.loading?(t(),a("i",K)):(t(),a("span",O,"Submit"))],8,H),e("span",Q,[u("Avez-vous déjà un compte? "),e("a",{onClick:r[13]||(r[13]=h((...o)=>l.goToLogin&&l.goToLogin(...o),["prevent"])),href:"#"},"Connectez")])])],32),e("button",{onClick:r[15]||(r[15]=(...o)=>l.closePopup&&l.closePopup(...o)),class:"close-button"},"Fermer")])])):m("",!0)}const er=v(y,[["render",W],["__scopeId","data-v-8a373e83"]]);export{er as default};
